---
layout: post
title: How to Reset the State of Redux Store
---

For example, let’s say we have two user accounts (`u1` and `u2`).
Imagine the following sequence of events:
1. User `u1` logs into the app and does something, so we cache some data in the store.
2. User `u1` logs out.
3. User `u2` logs into the app without refreshing the browser.
At this point, the cached data will be associated with u1, and we would like to clean it up.
How can we reset the Redux store to its initial state when the first user logs out?
One way to do that would be to write a root reducer by hand.
The root reducer would normally delegate handling the action to the reducer generated by `combineReducers()`. However, whenever it receives `USER_LOGOUT` action, it returns the initial state all over again.
For example, if your root reducer looked like this:

```javascript
const rootReducer = combineReducers({
  /* your app’s top-level reducers */
})
you can rename it to appReducer and write a new rootReducer delegating to it:
const appReducer = combineReducers({
  /* your app’s top-level reducers */
})
const rootReducer = (state, action) => {
  return appReducer(state, action)
}
```

Now we just need to teach the new rootReducer to return the initial state after `USER_LOGOUT` action. As we know, reducers are supposed to return the initial state when they are called with undefined as the first argument, no matter the action. Let’s use this fact to conditionally strip the accumulated state as we pass it to `appReducer`:

```javascript
const rootReducer = (state, action) => {
  if (action.type === 'USER_LOGOUT') {
    state = undefined
  }
  return appReducer(state, action)
}
```

Now, whenever `USER_LOGOUT` fires, all reducers will be initialized anew. They can also return something different than they did initially if they want to because they can check action.type as well.
To reiterate, the full new code looks like this:

```javascript
const appReducer = combineReducers({
  /* your app’s top-level reducers */
})
const rootReducer = (state, action) => {
  if (action.type === 'USER_LOGOUT') {
    state = undefined
  }
  return appReducer(state, action)
}
```

Note that I’m not mutating the state here, I am merely reassigning the reference of a local variable called state before passing it to another function. Mutating a state object would be a violation of Redux principles.